"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4543],{4543:(U,Z,m)=>{m.r(Z),m.d(Z,{HomePageModule:()=>H});var h=m(6814),a=m(1929),r=m(95),d=m(4934),_=m(5861),e=m(9212),P=m(7385),A=m(7104),v=m(9007);let E=(()=>{var o;class l{constructor(){this.firestore=(0,e.f3M)(A.ST)}addRegEst(t){return(0,v.ET)((0,v.hJ)((0,v.ad)(),"regEst"),t)}}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),l})();function F(o,l){1&o&&(e.TgZ(0,"ion-text",15),e._uU(1," Ingresa un nombre v\xe1lido. "),e.qZA())}function I(o,l){1&o&&(e.TgZ(0,"ion-text",15),e._uU(1," Ingresa un apellido v\xe1lido. "),e.qZA())}function b(o,l){1&o&&(e.TgZ(0,"ion-text",15),e._uU(1," Ingresa un rut v\xe1lido. "),e.qZA())}function k(o,l){1&o&&(e.TgZ(0,"ion-text",15),e._uU(1," Ingresa una patente v\xe1lida. "),e.qZA())}function y(o,l){1&o&&(e.TgZ(0,"ion-text",15),e._uU(1," Ingresa un n\xfamero de tel\xe9fono v\xe1lido. "),e.qZA())}function T(o,l){if(1&o&&(e.TgZ(0,"ion-select-option",16),e._uU(1),e.qZA()),2&o){const g=l.$implicit;e.Q6J("value",g.numero),e.xp6(1),e.hij(" E-",g.numero," ")}}const C=[{path:"",component:(()=>{var o;class l{constructor(t,n,i,s,u){this.parkingService=t,this.alertController=n,this.router=i,this.formBuilder=s,this.regEstService=u,this.estacionamientos=[],this.regEstForm={},this.rutValidator=c=>this.validarRut(c.value)?null:{rutInvalido:!0},this.estacionamientoForm=this.formBuilder.group({numero:["",r.kI.required],disponible:[!1],patente:["",r.kI.required],nombres:["",[r.kI.required,r.kI.minLength(3)]],apellidos:["",[r.kI.required,r.kI.minLength(4)]],rut:["",[r.kI.required,this.rutValidator]],dv:[[r.kI.required]],telefono:["+56 9",[r.kI.required,r.kI.pattern(/^\+56 9\d{8}$/)]]})}ngOnInit(){this.getParking()}getParking(){this.parkingService.getParkingData().subscribe(t=>{this.estacionamientos=t,this.estacionamientos=this.estacionamientos.filter(n=>!0===n.disponible),console.log(this.estacionamientos)})}parkingRegister(){const t={...this.estacionamientoForm.value};let n=t.telefono;n=n.replace("+56 9","").replace(/\s/g,""),t.telefono=n;const s=t.rut.split("-");if(2===s.length){let c=s[1];t.rut=s[0],t.dv=c}this.regEstForm={numero:t.numero,nombres:t.nombres,apellidos:t.apellidos,fechaHora:new Date,rut:t.rut,dv:t.dv,telefono:t.telefono,patente:t.patente},this.regEstService.addRegEst(this.regEstForm),this.parkingService.updateParking(t),this.estacionamientoForm.reset()}validarDigitoVerificador(t,n){return n===this.calcularDigitoVerificador(t)}validarRut(t){if(!t||!/^\d{7,8}-[kK\d]$/.test(t))return!1;const[i,s]=t.split("-");let u=0,c=2;for(let x=i.length-1;x>=0;x--)u+=c*parseInt(i.charAt(x),10),c=c<7?c+1:2;let f,p=11-u%11;return f=10===p?"k":11===p?"0":p.toString(),s.toLowerCase()===f}calcularDigitoVerificador(t){let n=0,i=2;for(let u=t.length-1;u>=0;u--)n+=parseInt(t.charAt(u),10)*i,i=i<7?i+1:2;const s=11-n%11;return 11===s?"0":10===s?"k":s.toString()}mostrarAlerta(t){var n=this;return(0,_.Z)(function*(){yield(yield n.alertController.create({header:"Alerta",message:t,buttons:["OK"]})).present()})()}}return(o=l).\u0275fac=function(t){return new(t||o)(e.Y36(P.N),e.Y36(a.Br),e.Y36(d.F0),e.Y36(r.qu),e.Y36(E))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-home"]],decls:39,vars:8,consts:[[2,"text-align","center"],[1,"ion-padding"],[1,"registro-card",2,"margin-top","10%"],[3,"formGroup"],["position","floating",1,"label"],["formControlName","nombres","minlength","3","name","fullName","type","text","placeholder","Ejemplo: Juan Jos\xe9",1,"input"],["color","danger","style","display: block; margin-left: 10px",4,"ngIf"],["formControlName","apellidos","name","apellidos","type","text","placeholder","Ejemplo: D\xedaz P\xe9rez",1,"input"],["formControlName","rut","name","rut","type","text","placeholder","Ejemplo: 123456789-k",1,"input"],["formControlName","patente","name","apellidos","type","text",1,"input"],["formControlName","telefono","name","telefono","type","tel",1,"input"],["formControlName","numero","name","numero","placeholder","Selecciona un estacionamiento",1,"select","select-placeholder","select-custom"],[3,"value",4,"ngFor","ngForOf"],["shape","round","expand","block",1,"boton",3,"disabled","click"],["routerLink","/vista-est"],["color","danger",2,"display","block","margin-left","10px"],[3,"value"]],template:function(t,n){if(1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),e._uU(3," Registro de Estacionamientos "),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-card",2)(6,"ion-card-content",3)(7,"ion-item")(8,"ion-label",4),e._uU(9,"Nombres"),e.qZA(),e._UZ(10,"ion-input",5),e.qZA(),e.YNc(11,F,2,0,"ion-text",6),e.TgZ(12,"ion-item")(13,"ion-label",4),e._uU(14,"Apellidos"),e.qZA(),e._UZ(15,"ion-input",7),e.qZA(),e.YNc(16,I,2,0,"ion-text",6),e.TgZ(17,"ion-item")(18,"ion-label",4),e._uU(19,"Rut"),e.qZA(),e._UZ(20,"ion-input",8),e.qZA(),e.YNc(21,b,2,0,"ion-text",6),e.TgZ(22,"ion-item")(23,"ion-label",4),e._uU(24,"Patente"),e.qZA(),e._UZ(25,"ion-input",9),e.qZA(),e.YNc(26,k,2,0,"ion-text",6),e.TgZ(27,"ion-item")(28,"ion-label",4),e._uU(29,"N\xfamero de Tel\xe9fono"),e.qZA(),e._UZ(30,"ion-input",10),e.qZA(),e.YNc(31,y,2,0,"ion-text",6),e.TgZ(32,"ion-item")(33,"ion-select",11),e.YNc(34,T,2,2,"ion-select-option",12),e.qZA()(),e.TgZ(35,"ion-button",13),e.NdJ("click",function(){return n.parkingRegister()}),e._uU(36," Registrar Uso "),e.qZA()()(),e.TgZ(37,"ion-button",14),e._uU(38,"Ver estacionamientos disponibles"),e.qZA()()),2&t){let i,s,u,c,p;e.xp6(6),e.Q6J("formGroup",n.estacionamientoForm),e.xp6(5),e.Q6J("ngIf",(null==(i=n.estacionamientoForm.get("nombres"))?null:i.invalid)&&(null==(i=n.estacionamientoForm.get("nombres"))?null:i.touched)),e.xp6(5),e.Q6J("ngIf",(null==(s=n.estacionamientoForm.get("apellidos"))?null:s.invalid)&&(null==(s=n.estacionamientoForm.get("apellidos"))?null:s.touched)),e.xp6(5),e.Q6J("ngIf",(null==(u=n.estacionamientoForm.get("rut"))?null:u.invalid)&&(null==(u=n.estacionamientoForm.get("telefono"))?null:u.touched)),e.xp6(5),e.Q6J("ngIf",(null==(c=n.estacionamientoForm.get("patente"))?null:c.invalid)&&(null==(c=n.estacionamientoForm.get("patente"))?null:c.touched)),e.xp6(5),e.Q6J("ngIf",(null==(p=n.estacionamientoForm.get("telefono"))?null:p.invalid)&&(null==(p=n.estacionamientoForm.get("telefono"))?null:p.touched)),e.xp6(3),e.Q6J("ngForOf",n.estacionamientos),e.xp6(1),e.Q6J("disabled",n.estacionamientoForm.invalid)}},dependencies:[h.sg,h.O5,r.JJ,r.JL,r.wO,a.YG,a.PM,a.FN,a.W2,a.Gu,a.pK,a.Ie,a.Q$,a.t9,a.n0,a.yW,a.wd,a.sr,a.QI,a.j9,a.YI,d.rH,r.sg,r.u],styles:["#fondo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;top:250px;position:relative;opacity:.4}#fondo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:140px;height:140px}#fondo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:26px;color:#010100;margin-bottom:15%}.text-validation[_ngcontent-%COMP%]{display:block;margin-left:16px}ion-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.form-container[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:15px}ion-item[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:15px}ion-button[_ngcontent-%COMP%]{width:100%;margin-top:15px}ion-text[_ngcontent-%COMP%]{position:relative;top:-5px;font-size:.75em}.select-placeholder[_ngcontent-%COMP%]{--placeholder-color: #ffffff;--placeholder-opacity: 1}.select-custom[_ngcontent-%COMP%]{--padding-end: 5px}"]}),l})()}];let M=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(C),d.Bz]}),l})(),H=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.ez,r.u5,a.Pc,M,r.UX]}),l})()}}]);