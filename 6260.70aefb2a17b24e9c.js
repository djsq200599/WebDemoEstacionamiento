"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6260],{6260:(x,p,u)=>{u.r(p),u.d(p,{HomePageModule:()=>I});var c=u(6814),a=u(1929),s=u(95),d=u(4934),f=u(5861),e=u(9212),h=u(4562);function v(o,l){1&o&&(e.TgZ(0,"ion-text",19),e._uU(1," Ingresa un nombre v\xe1lido. "),e.qZA())}function _(o,l){1&o&&(e.TgZ(0,"ion-text",19),e._uU(1," Ingresa un RUT v\xe1lido. "),e.qZA())}function C(o,l){1&o&&(e.TgZ(0,"ion-text",19),e._uU(1," Ingresa un n\xfamero de tel\xe9fono v\xe1lido. "),e.qZA())}function M(o,l){1&o&&(e.TgZ(0,"ion-text",19),e._uU(1," Ingresa un departamento v\xe1lido. "),e.qZA())}function T(o,l){1&o&&e._UZ(0,"ion-spinner",20)}function Z(o,l){1&o&&(e.TgZ(0,"ion-text",21),e._uU(1," Complete de manera correcta los campos inv\xe1lidos. "),e.qZA())}const P=[{path:"",component:(()=>{var o;class l{constructor(n,t,i){this.firestoreService=n,this.alertController=t,this.router=i,this.nuevaVisita={fullName:"",rut:{numero:"",digitoVerificador:""},phoneNumber:"+56",department:"",tower:""},this.nombreInvalido=!1,this.telefonoInvalido=!1,this.rutInvalido=!1,this.departamentoInvalido=!1,this.formularioInvalido=!1,this.cargando=!1}ngOnInit(){}agregarVisita(){var n=this;return(0,f.Z)(function*(){if(n.cargando=!0,n.validarNombre()&&n.validarRut()&&n.validarTelefono()&&n.validarDepartamento())try{n.nuevaVisita.fechaHora=new Date,yield n.firestoreService.addVisit(n.nuevaVisita),n.mostrarAlerta("Visita ingresada"),n.router.navigate(["/out-home"]),n.nuevaVisita={fullName:"",rut:{numero:"",digitoVerificador:""},phoneNumber:"+56",department:"",tower:""},n.nombreInvalido=!1,n.telefonoInvalido=!1,n.rutInvalido=!1,n.departamentoInvalido=!1}catch(t){console.error("Error al agregar visita:",t)}finally{n.cargando=!1}else n.formularioInvalido=!0,n.cargando=!1})()}validarNombre(){return this.nombreInvalido=!this.nuevaVisita.fullName||this.nuevaVisita.fullName.length<4||!/^[a-zA-Z\s]+$/g.test(this.nuevaVisita.fullName),!this.nombreInvalido}validarRut(){const n=this.nuevaVisita.rut.numero,t=this.nuevaVisita.rut.digitoVerificador;return!n||n.length<4||!/^[0-9]+$/g.test(n)?(this.rutInvalido=!0,!1):this.validarDigitoVerificador(n,t)?(this.rutInvalido=!1,!0):(this.rutInvalido=!0,!1)}validarDigitoVerificador(n,t){return t===this.calcularDigitoVerificador(n)}calcularDigitoVerificador(n){let t=0,i=2;for(let m=n.length-1;m>=0;m--)t+=parseInt(n.charAt(m),10)*i,i=i<7?i+1:2;const r=11-t%11;return 11===r?"0":10===r?"k":r.toString()}validarTelefono(){return this.telefonoInvalido=!this.nuevaVisita.phoneNumber||!/^\+56\d{9}$/.test(this.nuevaVisita.phoneNumber),!this.telefonoInvalido}validarDepartamento(){return this.departamentoInvalido=!this.nuevaVisita.department||!/^\d{3,3}$/.test(this.nuevaVisita.department),!this.departamentoInvalido}mostrarAlerta(n){var t=this;return(0,f.Z)(function*(){yield(yield t.alertController.create({header:"Alerta",message:n,buttons:["OK"]})).present()})()}}return(o=l).\u0275fac=function(n){return new(n||o)(e.Y36(h.C),e.Y36(a.Br),e.Y36(d.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-home"]],decls:43,vars:13,consts:[[2,"text-align","center"],[1,"ion-padding"],[1,"registro-card",2,"margin-top","30%"],["position","floating",1,"label"],["name","fullName","type","text","placeholder","Ejemplo: Juan P\xe9rez",1,"input",3,"ngModel","ngModelChange","ionChange"],["color","danger",4,"ngIf"],[2,"display","flex","align-items","center"],["name","rutNumero","type","text","placeholder","Ejemplo: 12345678",1,"input",2,"flex","80%",3,"ngModel","ngModelChange","ionChange"],[1,"guion",2,"flex","10%","text-align","center"],["name","rutDigitoVerificador","type","text","placeholder","K/9",1,"input",2,"flex","10%",3,"ngModel","ngModelChange","ionChange"],["name","phoneNumber","type","tel",1,"input",3,"ngModel","ngModelChange","ionChange"],["name","department","type","text","placeholder","Ejemplo: 201",1,"input",3,"ngModel","ngModelChange","ionChange"],[1,"label"],["name","tower",1,"select",3,"ngModel","ngModelChange"],["value","A"],["value","B"],["class","spinner",4,"ngIf"],["shape","round","expand","block",1,"boton",3,"disabled","click"],["color","danger","class","error-message",4,"ngIf"],["color","danger"],[1,"spinner"],["color","danger",1,"error-message"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title",0),e._uU(3," Registro de Visitas "),e.qZA()()(),e.TgZ(4,"ion-content",1)(5,"ion-card",2)(6,"ion-card-content")(7,"ion-item")(8,"ion-label",3),e._uU(9,"Nombre Completo"),e.qZA(),e.TgZ(10,"ion-input",4),e.NdJ("ngModelChange",function(r){return t.nuevaVisita.fullName=r})("ionChange",function(){return t.validarNombre()}),e.qZA()(),e.YNc(11,v,2,0,"ion-text",5),e.TgZ(12,"ion-item")(13,"ion-label",3),e._uU(14,"Rut"),e.qZA(),e.TgZ(15,"div",6)(16,"ion-input",7),e.NdJ("ngModelChange",function(r){return t.nuevaVisita.rut.numero=r})("ionChange",function(){return t.validarRut()}),e.qZA(),e.TgZ(17,"ion-text",8),e._uU(18,"-"),e.qZA(),e.TgZ(19,"ion-input",9),e.NdJ("ngModelChange",function(r){return t.nuevaVisita.rut.digitoVerificador=r})("ionChange",function(){return t.validarRut()}),e.qZA()()(),e.YNc(20,_,2,0,"ion-text",5),e.TgZ(21,"ion-item")(22,"ion-label",3),e._uU(23,"N\xfamero de Tel\xe9fono"),e.qZA(),e.TgZ(24,"ion-input",10),e.NdJ("ngModelChange",function(r){return t.nuevaVisita.phoneNumber=r})("ionChange",function(){return t.validarTelefono()}),e.qZA()(),e.YNc(25,C,2,0,"ion-text",5),e.TgZ(26,"ion-item")(27,"ion-label",3),e._uU(28,"Departamento"),e.qZA(),e.TgZ(29,"ion-input",11),e.NdJ("ngModelChange",function(r){return t.nuevaVisita.department=r})("ionChange",function(){return t.validarDepartamento()}),e.qZA()(),e.YNc(30,M,2,0,"ion-text",5),e.TgZ(31,"ion-item")(32,"ion-label",12),e._uU(33,"Torre"),e.qZA(),e.TgZ(34,"ion-select",13),e.NdJ("ngModelChange",function(r){return t.nuevaVisita.tower=r}),e.TgZ(35,"ion-select-option",14),e._uU(36,"A"),e.qZA(),e.TgZ(37,"ion-select-option",15),e._uU(38,"B"),e.qZA()()(),e.YNc(39,T,1,0,"ion-spinner",16),e.TgZ(40,"ion-button",17),e.NdJ("click",function(){return t.agregarVisita()}),e._uU(41," Registrar Visita "),e.qZA(),e.YNc(42,Z,2,0,"ion-text",18),e.qZA()()()),2&n&&(e.xp6(10),e.Q6J("ngModel",t.nuevaVisita.fullName),e.xp6(1),e.Q6J("ngIf",t.nombreInvalido),e.xp6(5),e.Q6J("ngModel",t.nuevaVisita.rut.numero),e.xp6(3),e.Q6J("ngModel",t.nuevaVisita.rut.digitoVerificador),e.xp6(1),e.Q6J("ngIf",t.rutInvalido),e.xp6(4),e.Q6J("ngModel",t.nuevaVisita.phoneNumber),e.xp6(1),e.Q6J("ngIf",t.telefonoInvalido),e.xp6(4),e.Q6J("ngModel",t.nuevaVisita.department),e.xp6(1),e.Q6J("ngIf",t.departamentoInvalido),e.xp6(4),e.Q6J("ngModel",t.nuevaVisita.tower),e.xp6(5),e.Q6J("ngIf",t.cargando),e.xp6(1),e.Q6J("disabled",t.cargando),e.xp6(2),e.Q6J("ngIf",t.formularioInvalido))},dependencies:[c.O5,s.JJ,s.On,a.YG,a.PM,a.FN,a.W2,a.Gu,a.pK,a.Ie,a.Q$,a.t9,a.n0,a.PQ,a.yW,a.wd,a.sr,a.QI,a.j9],styles:["#fondo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;top:250px;position:relative;opacity:.4}#fondo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:140px;height:140px}#fondo[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:26px;color:#010100;margin-bottom:15%}ion-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.form-container[_ngcontent-%COMP%]{max-width:400px;width:100%;padding:15px}ion-item[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #ccc;margin-bottom:15px}ion-button[_ngcontent-%COMP%]{width:100%;margin-top:15px}"]}),l})()}];let V=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(P),d.Bz]}),l})(),I=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,s.u5,a.Pc,V]}),l})()}}]);